{"version":3,"file":"ngx-grapesjs.mjs","sources":["../../../projects/ngx-grapesjs/src/lib/newsletter-editor/ngx-newsletter-editor.service.ts","../../../projects/ngx-grapesjs/src/lib/editor.component.ts","../../../projects/ngx-grapesjs/src/lib/newsletter-editor/ngx-newsletter-editor.component.ts","../../../projects/ngx-grapesjs/src/lib/webpage-editor/ngx-webgrapesjs.component.ts","../../../projects/ngx-grapesjs/src/lib/ngx-grapesjs.module.ts","../../../projects/ngx-grapesjs/src/public-api.ts","../../../projects/ngx-grapesjs/src/ngx-grapesjs.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxNewsletterEditorService {\n\n  parserHtml = {};\n\n}\n","import { Component, Input } from '@angular/core';\n\nimport { Config } from './editor.model';\n\ndeclare var grapesjs: {\n  init(options: any): object;\n};\n\n@Component({\n  template: ''\n})\n\nexport class NgxEditorComponent {\n\n  @Input() template = '';\n  @Input() storagePrefix = 'gjs-';\n\n  setup(customConfig: Partial<Config>) {\n    const config: Partial<Config> = {\n      components: this.template,\n      storageManager: {\n        id: this.storagePrefix\n      }\n    };\n\n    return grapesjs.init({\n      ...config,\n      ...customConfig\n    });\n  }\n\n}\n","import { Component, Input, OnInit } from '@angular/core';\n\nimport { CommandSender, NewsletterConfig, NewsletterEditor, TextAction, TextEditor } from './newsletter-editor.model';\nimport { NgxNewsletterEditorService } from './ngx-newsletter-editor.service';\nimport { Placeholder } from './placeholder.model';\nimport { NgxEditorComponent } from '../editor.component';\n\n@Component({\n  selector: 'ngx-grapes-newsletter-editor',\n  template: '<div id=\"gjs\"></div>'\n})\nexport class NgxNewsletterEditorComponent extends NgxEditorComponent implements OnInit {\n\n  @Input() placeholders: Placeholder[] = [];\n\n  private editor: NewsletterEditor | undefined;\n  private newsletterConfig: Partial<NewsletterConfig> = {\n    container: '#gjs',\n    plugins: ['grapesjs-preset-newsletter'],\n    pluginsOpts: {\n      'grapesjs-preset-newsletter': {\n        modalTitleImport: 'Import template'\n      }\n    },\n    parser: {\n      parserHtml: {}\n    }\n  };\n\n  constructor(private ngxNewsletterEditorService: NgxNewsletterEditorService) {\n    super();\n  }\n\n  ngOnInit() {\n    // setup the default parser. It can be overriden by providing a custom implementation of the ngxNewsletterEditorService\n    if (this.newsletterConfig.parser) {\n      this.newsletterConfig.parser.parserHtml = this.ngxNewsletterEditorService?.parserHtml;\n    }\n\n    this.editor = this.setup(this.newsletterConfig);\n\n    this.addButtons();\n    this.addPlaceholders();\n  }\n\n  getRawHtml(): string | undefined {\n    return this.editor?.runCommand?.('gjs-get-inlined-html');\n  }\n\n  private undo = (editor: NewsletterEditor, sender: CommandSender) => {\n    sender.set('active', 0);\n    editor.UndoManager?.undo(1);\n  };\n\n  private redo = (editor: NewsletterEditor, sender: CommandSender) => {\n    sender.set('active', 0);\n    editor.UndoManager?.redo(1);\n  };\n\n  private addButtons() {\n    this.editor?.Panels?.addButton('options', [\n      {\n        id: 'undo',\n        className: 'fa fa-undo',\n        command: this.undo,\n        attributes: {\n          title: 'Undo'\n        }\n      },\n      {\n        id: 'redo',\n        className: 'fa fa-repeat icon-redo',\n        command: this.redo,\n        attributes: {\n          title: 'Redo'\n        }\n      }\n    ]);\n  }\n\n  private addPlaceholders() {\n    if (this.placeholders.length) {\n      const placeholderSelectOptions = this.placeholders.map(placeholder =>\n        `<option\n            title=\"${placeholder.description}\"\n            data-tooltip-pos=\"bottom\"\n            data-tooltip=\"Bold\"\n            class=\"gjs-one-color\"\n            value=\"<% ${placeholder.value} %>\"\n        >\n        ${placeholder.name}\n        </option>`\n      );\n\n      this.editor?.RichTextEditor?.add('placeholders', {\n        icon: `<select class=\"gjs-field gjs-two-color\">\n                <option class=\"gjs-one-color\" value=\"\">- Select placeholder -</option>\n                ${placeholderSelectOptions}\n              </select>\n        `,\n        event: 'change',\n        result: (rte: TextEditor, action: TextAction) => rte.insertHTML(action.btn.firstChild.value),\n        update: (_: TextEditor, action: TextAction) => action.btn.firstChild.value = ''\n      });\n    }\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\nimport { NgxEditorComponent } from '../editor.component';\nimport { Config } from '../editor.model';\n\n@Component({\n  selector: 'ngx-grapes-webpage-editor',\n  template: '<div id=\"gjs\"></div>'\n})\n\nexport class NgxWebpageEditorComponent extends NgxEditorComponent implements OnInit {\n\n  editor: any;\n  private webpageConfig: Partial<Config> = {\n    container: '#gjs',\n    plugins: [\n      'grapesjs-preset-webpage',\n      'gjs-blocks-basic',\n      'grapesjs-plugin-forms',\n      'grapesjs-plugin-ckeditor',\n      'grapesjs-blocks-table',\n      'grapesjs-component-code-editor'\n    ],\n    pluginsOpts: {\n      'grapesjs-blocks-table': { 'containerId': '#gjs' },\n      'grapesjs-preset-webpage': {\n        modalTitleImport: 'Import template'\n      }\n    }\n  };\n\n  ngOnInit() {\n    this.editor = this.setup(this.webpageConfig);\n    const pn = this.editor.Panels;\n    const panelViews = pn.addPanel({\n      id: 'views'\n    });\n    panelViews.get('buttons').add([{\n      attributes: {\n        title: 'Open Code'\n      },\n      className: 'fa fa-file-code-o',\n      command: 'open-code',\n      togglable: false,\n      id: 'open-code'\n    }]);\n  }\n\n}\n","import { NgModule } from '@angular/core';\n\nimport { NgxNewsletterEditorComponent } from './newsletter-editor/ngx-newsletter-editor.component';\nimport { NgxWebpageEditorComponent } from './webpage-editor/ngx-webgrapesjs.component';\n\n@NgModule({\n  declarations: [\n    NgxNewsletterEditorComponent,\n    NgxWebpageEditorComponent\n  ],\n  exports: [\n    NgxNewsletterEditorComponent,\n    NgxWebpageEditorComponent\n  ]\n})\nexport class NgxGrapesjsModule { }\n","/*\n * Public API Surface of ngx-grapesjs\n */\n\nexport * from './lib/newsletter-editor/ngx-newsletter-editor.service';\nexport * from './lib/newsletter-editor/ngx-newsletter-editor.component';\nexport * from './lib/webpage-editor/ngx-webgrapesjs.component';\nexport * from './lib/ngx-grapesjs.module';\nexport * from './lib/newsletter-editor/placeholder.model';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i1.NgxNewsletterEditorService"],"mappings":";;;AAEA,MAGa,0BAA0B,CAAA;AAHvC,IAAA,WAAA,GAAA;QAKE,IAAU,CAAA,UAAA,GAAG,EAAE,CAAC;AAEjB,KAAA;8GAJY,0BAA0B,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA,CAAA,EAAA;AAA1B,IAAA,SAAA,IAAA,CAAA,KAAA,GAAA,EAAA,CAAA,qBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,0BAA0B,cAFzB,MAAM,EAAA,CAAA,CAAA,EAAA;;2FAEP,0BAA0B,EAAA,UAAA,EAAA,CAAA;kBAHtC,UAAU;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,UAAU,EAAE,MAAM;AACnB,iBAAA,CAAA;;;ACID,MAIa,kBAAkB,CAAA;AAJ/B,IAAA,WAAA,GAAA;QAMW,IAAQ,CAAA,QAAA,GAAG,EAAE,CAAC;QACd,IAAa,CAAA,aAAA,GAAG,MAAM,CAAC;AAgBjC,KAAA;AAdC,IAAA,KAAK,CAAC,YAA6B,EAAA;AACjC,QAAA,MAAM,MAAM,GAAoB;YAC9B,UAAU,EAAE,IAAI,CAAC,QAAQ;AACzB,YAAA,cAAc,EAAE;gBACd,EAAE,EAAE,IAAI,CAAC,aAAa;AACvB,aAAA;SACF,CAAC;QAEF,OAAO,QAAQ,CAAC,IAAI,CAAC;AACnB,YAAA,GAAG,MAAM;AACT,YAAA,GAAG,YAAY;AAChB,SAAA,CAAC,CAAC;KACJ;8GAjBU,kBAAkB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;AAAlB,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA,kBAAkB,sHAHnB,EAAE,EAAA,QAAA,EAAA,IAAA,EAAA,CAAA,CAAA,EAAA;;2FAGD,kBAAkB,EAAA,UAAA,EAAA,CAAA;kBAJ9B,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACT,oBAAA,QAAQ,EAAE,EAAE;AACb,iBAAA,CAAA;8BAIU,QAAQ,EAAA,CAAA;sBAAhB,KAAK;gBACG,aAAa,EAAA,CAAA;sBAArB,KAAK;;;ACRR,MAIa,4BAA6B,SAAQ,kBAAkB,CAAA;AAkBlE,IAAA,WAAA,CAAoB,0BAAsD,EAAA;AACxE,QAAA,KAAK,EAAE,CAAC;QADU,IAA0B,CAAA,0BAAA,GAA1B,0BAA0B,CAA4B;QAhBjE,IAAY,CAAA,YAAA,GAAkB,EAAE,CAAC;AAGlC,QAAA,IAAA,CAAA,gBAAgB,GAA8B;AACpD,YAAA,SAAS,EAAE,MAAM;YACjB,OAAO,EAAE,CAAC,4BAA4B,CAAC;AACvC,YAAA,WAAW,EAAE;AACX,gBAAA,4BAA4B,EAAE;AAC5B,oBAAA,gBAAgB,EAAE,iBAAiB;AACpC,iBAAA;AACF,aAAA;AACD,YAAA,MAAM,EAAE;AACN,gBAAA,UAAU,EAAE,EAAE;AACf,aAAA;SACF,CAAC;AAsBM,QAAA,IAAA,CAAA,IAAI,GAAG,CAAC,MAAwB,EAAE,MAAqB,KAAI;AACjE,YAAA,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;AACxB,YAAA,MAAM,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;AAC9B,SAAC,CAAC;AAEM,QAAA,IAAA,CAAA,IAAI,GAAG,CAAC,MAAwB,EAAE,MAAqB,KAAI;AACjE,YAAA,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;AACxB,YAAA,MAAM,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;AAC9B,SAAC,CAAC;KA1BD;IAED,QAAQ,GAAA;;AAEN,QAAA,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE;AAChC,YAAA,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,UAAU,GAAG,IAAI,CAAC,0BAA0B,EAAE,UAAU,CAAC;AACvF,SAAA;QAED,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAEhD,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,eAAe,EAAE,CAAC;KACxB;IAED,UAAU,GAAA;QACR,OAAO,IAAI,CAAC,MAAM,EAAE,UAAU,GAAG,sBAAsB,CAAC,CAAC;KAC1D;IAYO,UAAU,GAAA;QAChB,IAAI,CAAC,MAAM,EAAE,MAAM,EAAE,SAAS,CAAC,SAAS,EAAE;AACxC,YAAA;AACE,gBAAA,EAAE,EAAE,MAAM;AACV,gBAAA,SAAS,EAAE,YAAY;gBACvB,OAAO,EAAE,IAAI,CAAC,IAAI;AAClB,gBAAA,UAAU,EAAE;AACV,oBAAA,KAAK,EAAE,MAAM;AACd,iBAAA;AACF,aAAA;AACD,YAAA;AACE,gBAAA,EAAE,EAAE,MAAM;AACV,gBAAA,SAAS,EAAE,wBAAwB;gBACnC,OAAO,EAAE,IAAI,CAAC,IAAI;AAClB,gBAAA,UAAU,EAAE;AACV,oBAAA,KAAK,EAAE,MAAM;AACd,iBAAA;AACF,aAAA;AACF,SAAA,CAAC,CAAC;KACJ;IAEO,eAAe,GAAA;AACrB,QAAA,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE;YAC5B,MAAM,wBAAwB,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,IAChE,CAAA;AACa,mBAAA,EAAA,WAAW,CAAC,WAAW,CAAA;;;;AAIpB,sBAAA,EAAA,WAAW,CAAC,KAAK,CAAA;;AAE/B,QAAA,EAAA,WAAW,CAAC,IAAI,CAAA;AACR,iBAAA,CAAA,CACX,CAAC;YAEF,IAAI,CAAC,MAAM,EAAE,cAAc,EAAE,GAAG,CAAC,cAAc,EAAE;AAC/C,gBAAA,IAAI,EAAE,CAAA;;kBAEI,wBAAwB,CAAA;;AAEjC,QAAA,CAAA;AACD,gBAAA,KAAK,EAAE,QAAQ;AACf,gBAAA,MAAM,EAAE,CAAC,GAAe,EAAE,MAAkB,KAAK,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC;AAC5F,gBAAA,MAAM,EAAE,CAAC,CAAa,EAAE,MAAkB,KAAK,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,GAAG,EAAE;AAChF,aAAA,CAAC,CAAC;AACJ,SAAA;KACF;8GA9FU,4BAA4B,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAAA,0BAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;AAA5B,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA,4BAA4B,qIAF7B,sBAAsB,EAAA,QAAA,EAAA,IAAA,EAAA,CAAA,CAAA,EAAA;;2FAErB,4BAA4B,EAAA,UAAA,EAAA,CAAA;kBAJxC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACT,oBAAA,QAAQ,EAAE,8BAA8B;AACxC,oBAAA,QAAQ,EAAE,sBAAsB;AACjC,iBAAA,CAAA;8GAGU,YAAY,EAAA,CAAA;sBAApB,KAAK;;;ACRR,MAKa,yBAA0B,SAAQ,kBAAkB,CAAA;AALjE,IAAA,WAAA,GAAA;;AAQU,QAAA,IAAA,CAAA,aAAa,GAAoB;AACvC,YAAA,SAAS,EAAE,MAAM;AACjB,YAAA,OAAO,EAAE;gBACP,yBAAyB;gBACzB,kBAAkB;gBAClB,uBAAuB;gBACvB,0BAA0B;gBAC1B,uBAAuB;gBACvB,gCAAgC;AACjC,aAAA;AACD,YAAA,WAAW,EAAE;AACX,gBAAA,uBAAuB,EAAE,EAAE,aAAa,EAAE,MAAM,EAAE;AAClD,gBAAA,yBAAyB,EAAE;AACzB,oBAAA,gBAAgB,EAAE,iBAAiB;AACpC,iBAAA;AACF,aAAA;SACF,CAAC;AAmBH,KAAA;IAjBC,QAAQ,GAAA;QACN,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;AAC7C,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;AAC9B,QAAA,MAAM,UAAU,GAAG,EAAE,CAAC,QAAQ,CAAC;AAC7B,YAAA,EAAE,EAAE,OAAO;AACZ,SAAA,CAAC,CAAC;QACH,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC;AAC7B,gBAAA,UAAU,EAAE;AACV,oBAAA,KAAK,EAAE,WAAW;AACnB,iBAAA;AACD,gBAAA,SAAS,EAAE,mBAAmB;AAC9B,gBAAA,OAAO,EAAE,WAAW;AACpB,gBAAA,SAAS,EAAE,KAAK;AAChB,gBAAA,EAAE,EAAE,WAAW;AAChB,aAAA,CAAC,CAAC,CAAC;KACL;8GApCU,yBAAyB,EAAA,IAAA,EAAA,IAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;AAAzB,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA,yBAAyB,wFAH1B,sBAAsB,EAAA,QAAA,EAAA,IAAA,EAAA,CAAA,CAAA,EAAA;;2FAGrB,yBAAyB,EAAA,UAAA,EAAA,CAAA;kBALrC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACT,oBAAA,QAAQ,EAAE,2BAA2B;AACrC,oBAAA,QAAQ,EAAE,sBAAsB;AACjC,iBAAA,CAAA;;;ACHD,MAUa,iBAAiB,CAAA;8GAAjB,iBAAiB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA,EAAA;AAAjB,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,mBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,iBAAiB,iBAR1B,4BAA4B;AAC5B,YAAA,yBAAyB,aAGzB,4BAA4B;YAC5B,yBAAyB,CAAA,EAAA,CAAA,CAAA,EAAA;+GAGhB,iBAAiB,EAAA,CAAA,CAAA,EAAA;;2FAAjB,iBAAiB,EAAA,UAAA,EAAA,CAAA;kBAV7B,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;AACR,oBAAA,YAAY,EAAE;wBACZ,4BAA4B;wBAC5B,yBAAyB;AAC1B,qBAAA;AACD,oBAAA,OAAO,EAAE;wBACP,4BAA4B;wBAC5B,yBAAyB;AAC1B,qBAAA;AACF,iBAAA,CAAA;;;ACdD;;AAEG;;ACFH;;AAEG;;;;"}